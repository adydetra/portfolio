!function(t,e,i,s){"use strict";var n={speed:500,activeClass:"active",menuTop:0,onItemSelected:null,stickyClass:"sticky",menuItemSelector:"a",stickyBarSelector:null,stickyBarHeight:null};function o(t,e,i){this.hash=t,this.top=e,this.bottom=i}function c(t,e,i,s){this.$item=t,this.section=new o(e,i,s)}function r(e,i){this.$menu=e,this.$stickyBar=i.stickyBarSelector&&t(i.stickyBarSelector)||e,this.menuOffsetTop=e.offset().top,this.stickyBarHeight=i.stickyBarHeight||this.$stickyBar.height(),this.options=i,this.menuItems=[],this.getMenuItems(),this.bindEvent()}"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(t,e){var i=-1;e=1*e||0;for(var s=0,n=this.length;s<n;s++)if(s>=e&&this[s]===t){i=s;break}return i}),c.prototype.scrollToSection=function(t,e){e&&e.call(this.$item)},c.prototype.setMenuItem=function(t){this.$item.addClass(t).siblings().removeClass(t)},r.prototype={constructor:r,getMenuItems:function(){var e=this.menuItems,i=this.$menu.find(this.options.menuItemSelector+":not(.exceptLink)"),s=this.stickyBarHeight;i.each(function(i,n){var o=t(this),r=(o.hasAttr("href")?o:o.find("[href]").eq(0)).attr("href");if(!(r.indexOf("#")<0)){var h=r.substr(1),u=t("."+h);if(u.length){var a=u.offset().top;e.push(new c(o,h,a-s,a+u.outerHeight()))}}})},setStickyMenu:function(){var s=t(e),n=t(i.body),o=(this.$menu,this.$stickyBar),c=this.options,r=s.scrollTop(),h=(this.stickyBarHeight,this.menuOffsetTop),u=this.menuItems,a={};r>h||(o.css(a).removeClass(c.stickyClass),n.css("padding-top",0)),function(){for(var e=0;e<u.length;e++)if(u[e].section.top<=r&&u[e].section.bottom>=r){u[e+1]&&u[e+1].section.top<=r?u[e+1].setMenuItem(c.activeClass):u[e].setMenuItem(c.activeClass);break}0==r&&u[0].setMenuItem(c.activeClass),r>=t(i).height()-s.height()&&u[u.length-1].setMenuItem(c.activeClass)}()},bindEvent:function(){var i=t(e),s=this.menuItems,n=this.options;this.$menu.on("click",n.menuItemSelector+":not(.exceptLink)",function(){var e=t(this).index();s[e]&&s[e].scrollToSection(n.speed,n.onItemSelected)});var o=this;i.on({scroll:function(){o.setStickyMenu()}}),i.scrollTop()>0&&o.setStickyMenu()}},t.fn.hasAttr=function(e){return void 0!==t(this).attr(e)},t.fn.stickymenu=function(e){return e=t.extend(n,e||{}),new r(t(this),e)}}($,window,document);